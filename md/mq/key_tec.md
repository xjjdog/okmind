# 通用MQ（怎么学）

## 消息系统作用

- 削峰
- 缓冲
- 解耦
- 冗余
- 增加健壮性

## 高可用

- 集群高可用
- 主从切换
- 副本机制
- 对等节点

## 高可靠

### 集群高可靠

- ack机制
- 多副本

### 单机高可靠

- 刷盘机制
- 可靠持久化
- 完整性校验

### 生产端

- 错误处理
- 超时处理
- 重试处理

### 消费端

#### 语义

- at most once
- at least once
- exactly once

#### 消息确认

- offset

#### 错误处理

- 死信队列

#### 重复消费问题


## 高性能

### 指标

- 消息延迟
- 消息吞吐

### 手段方式

- 异步
- 操作系统优化
- 顺序IO
- 分片
- 零拷贝
- 批量
  - buffer大小
  - 超时窗口
  

## 消息类型

- 普通消息
- 顺序消息
- 定时消息
- 事务消息
- 消息过滤
  - TAG
  - 消费端过滤
- 消息关系
  - 点对点
  - Pub/Sub
  - Fanout广播

## 消费方式

- 推 push
- 拉 pull


## 堆积能力

- 内存型
- 消息清理机制
- 存储能力
  - 磁盘
  - DB
  - 共享磁盘

## 生态

- 多语言支持
- 系统集成


## 作者
### xjjdog
#### ![](/qrcode_for_gh_183eb256f8af_258.jpg)
